//
// This file is part of libdebug Python library (https://github.com/libdebug/libdebug).
// Copyright (c) 2024 Roberto Alessandro Bertolini. All rights reserved.
// Licensed under the MIT license. See LICENSE file in the project root for details.
//

#include <stdio.h>
#include <stdlib.h>

#pragma GCC optimize ("O0")

void register_test()
{
    asm volatile (
        "sub sp, sp, #96\n\t"
        "stp x19, x20, [sp, #0]\n\t"
        "stp x21, x22, [sp, #16]\n\t"
        "stp x23, x24, [sp, #32]\n\t"
        "stp x25, x26, [sp, #48]\n\t"
        "stp x27, x28, [sp, #64]\n\t"
        "stp x29, x30, [sp, #80]\n\t"
        "nop\n\t"
        "movk x0, #0x1111, lsl #0\n\t"
        "movk x0, #0x1111, lsl #16\n\t"
        "movk x0, #0x1111, lsl #32\n\t"
        "movk x0, #0x1111, lsl #48\n\t"
        "movk x1, #0x2222, lsl #0\n\t"
        "movk x1, #0x2222, lsl #16\n\t"
        "movk x1, #0x2222, lsl #32\n\t"
        "movk x1, #0x2222, lsl #48\n\t"
        "movk x2, #0x3333, lsl #0\n\t"
        "movk x2, #0x3333, lsl #16\n\t"
        "movk x2, #0x3333, lsl #32\n\t"
        "movk x2, #0x3333, lsl #48\n\t"
        "movk x3, #0x4444, lsl #0\n\t"
        "movk x3, #0x4444, lsl #16\n\t"
        "movk x3, #0x4444, lsl #32\n\t"
        "movk x3, #0x4444, lsl #48\n\t"
        "movk x4, #0x5555, lsl #0\n\t"
        "movk x4, #0x5555, lsl #16\n\t"
        "movk x4, #0x5555, lsl #32\n\t"
        "movk x4, #0x5555, lsl #48\n\t"
        "movk x5, #0x6666, lsl #0\n\t"
        "movk x5, #0x6666, lsl #16\n\t"
        "movk x5, #0x6666, lsl #32\n\t"
        "movk x5, #0x6666, lsl #48\n\t"
        "movk x6, #0x7777, lsl #0\n\t"
        "movk x6, #0x7777, lsl #16\n\t"
        "movk x6, #0x7777, lsl #32\n\t"
        "movk x6, #0x7777, lsl #48\n\t"
        "movk x7, #0x8888, lsl #0\n\t"
        "movk x7, #0x8888, lsl #16\n\t"
        "movk x7, #0x8888, lsl #32\n\t"
        "movk x7, #0x8888, lsl #48\n\t"
        "movk x8, #0x9999, lsl #0\n\t"
        "movk x8, #0x9999, lsl #16\n\t"
        "movk x8, #0x9999, lsl #32\n\t"
        "movk x8, #0x9999, lsl #48\n\t"
        "movk x9, #0xAAAA, lsl #0\n\t"
        "movk x9, #0xAAAA, lsl #16\n\t"
        "movk x9, #0xAAAA, lsl #32\n\t"
        "movk x9, #0xAAAA, lsl #48\n\t"
        "movk x10, #0xBBBB, lsl #0\n\t"
        "movk x10, #0xBBBB, lsl #16\n\t"
        "movk x10, #0xBBBB, lsl #32\n\t"
        "movk x10, #0xBBBB, lsl #48\n\t"
        "movk x11, #0xCCCC, lsl #0\n\t"
        "movk x11, #0xCCCC, lsl #16\n\t"
        "movk x11, #0xCCCC, lsl #32\n\t"
        "movk x11, #0xCCCC, lsl #48\n\t"
        "movk x12, #0xDDDD, lsl #0\n\t"
        "movk x12, #0xDDDD, lsl #16\n\t"
        "movk x12, #0xDDDD, lsl #32\n\t"
        "movk x12, #0xDDDD, lsl #48\n\t"
        "movk x13, #0xEEEE, lsl #0\n\t"
        "movk x13, #0xEEEE, lsl #16\n\t"
        "movk x13, #0xEEEE, lsl #32\n\t"
        "movk x13, #0xEEEE, lsl #48\n\t"
        "movk x14, #0xFFFF, lsl #0\n\t"
        "movk x14, #0xFFFF, lsl #16\n\t"
        "movk x14, #0xFFFF, lsl #32\n\t"
        "movk x14, #0xFFFF, lsl #48\n\t"
        "movk x15, #0x0101, lsl #0\n\t"
        "movk x15, #0x0101, lsl #16\n\t"
        "movk x15, #0x0101, lsl #32\n\t"
        "movk x15, #0x0101, lsl #48\n\t"
        "movk x16, #0x0202, lsl #0\n\t"
        "movk x16, #0x0202, lsl #16\n\t"
        "movk x16, #0x0202, lsl #32\n\t"
        "movk x16, #0x0202, lsl #48\n\t"
        "movk x17, #0x0303, lsl #0\n\t"
        "movk x17, #0x0303, lsl #16\n\t"
        "movk x17, #0x0303, lsl #32\n\t"
        "movk x17, #0x0303, lsl #48\n\t"
        "movk x18, #0x0404, lsl #0\n\t"
        "movk x18, #0x0404, lsl #16\n\t"
        "movk x18, #0x0404, lsl #32\n\t"
        "movk x18, #0x0404, lsl #48\n\t"
        "movk x19, #0x0505, lsl #0\n\t"
        "movk x19, #0x0505, lsl #16\n\t"
        "movk x19, #0x0505, lsl #32\n\t"
        "movk x19, #0x0505, lsl #48\n\t"
        "movk x20, #0x0606, lsl #0\n\t"
        "movk x20, #0x0606, lsl #16\n\t"
        "movk x20, #0x0606, lsl #32\n\t"
        "movk x20, #0x0606, lsl #48\n\t"
        "movk x21, #0x0707, lsl #0\n\t"
        "movk x21, #0x0707, lsl #16\n\t"
        "movk x21, #0x0707, lsl #32\n\t"
        "movk x21, #0x0707, lsl #48\n\t"
        "movk x22, #0x0808, lsl #0\n\t"
        "movk x22, #0x0808, lsl #16\n\t"
        "movk x22, #0x0808, lsl #32\n\t"
        "movk x22, #0x0808, lsl #48\n\t"
        "movk x23, #0x0909, lsl #0\n\t"
        "movk x23, #0x0909, lsl #16\n\t"
        "movk x23, #0x0909, lsl #32\n\t"
        "movk x23, #0x0909, lsl #48\n\t"
        "movk x24, #0x0A0A, lsl #0\n\t"
        "movk x24, #0x0A0A, lsl #16\n\t"
        "movk x24, #0x0A0A, lsl #32\n\t"
        "movk x24, #0x0A0A, lsl #48\n\t"
        "movk x25, #0x0B0B, lsl #0\n\t"
        "movk x25, #0x0B0B, lsl #16\n\t"
        "movk x25, #0x0B0B, lsl #32\n\t"
        "movk x25, #0x0B0B, lsl #48\n\t"
        "movk x26, #0x0C0C, lsl #0\n\t"
        "movk x26, #0x0C0C, lsl #16\n\t"
        "movk x26, #0x0C0C, lsl #32\n\t"
        "movk x26, #0x0C0C, lsl #48\n\t"
        "movk x27, #0x0D0D, lsl #0\n\t"
        "movk x27, #0x0D0D, lsl #16\n\t"
        "movk x27, #0x0D0D, lsl #32\n\t"
        "movk x27, #0x0D0D, lsl #48\n\t"
        "movk x28, #0x0E0E, lsl #0\n\t"
        "movk x28, #0x0E0E, lsl #16\n\t"
        "movk x28, #0x0E0E, lsl #32\n\t"
        "movk x28, #0x0E0E, lsl #48\n\t"
        "movk x29, #0x0F0F, lsl #0\n\t"
        "movk x29, #0x0F0F, lsl #16\n\t"
        "movk x29, #0x0F0F, lsl #32\n\t"
        "movk x29, #0x0F0F, lsl #48\n\t"
        "movk x30, #0x1010, lsl #0\n\t"
        "movk x30, #0x1010, lsl #16\n\t"
        "movk x30, #0x1010, lsl #32\n\t"
        "movk x30, #0x1010, lsl #48\n\t"
        "nop\n\t"
        "ldp x19, x20, [sp, #0]\n\t"
        "ldp x21, x22, [sp, #16]\n\t"
        "ldp x23, x24, [sp, #32]\n\t"
        "ldp x25, x26, [sp, #48]\n\t"
        "ldp x27, x28, [sp, #64]\n\t"
        "ldp x29, x30, [sp, #80]\n\t"
        "add sp, sp, #96\n\t"
        :
        :
        : "x0", "x1", "x2", "x3", "x4", "x5", "x6", "x7", "x8", "x9", "x10", "x11", "x12", "x13", "x14", "x15", "x16", "x17", "x18"
    );
}

int main()
{
    printf("Provola\n");

    register_test();

    return EXIT_SUCCESS;
}
